{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","services/persons.js","App.js","index.js"],"names":["Filter","filterRef","handleChange","ref","onChange","PersonForm","nameRef","phoneRef","handleSubmit","onSubmit","type","Person","person","deletePerson","name","number","onClick","id","baseUrl","axios","get","then","response","data","newObject","put","post","delete","App","useState","persons","setPersons","personsToShow","setPersonsToShow","filterInput","useRef","nameInput","phoneInput","useEffect","personService","initialPersons","window","confirm","filter","p","current","value","event","target","toLowerCase","show","includes","preventDefault","nameInputValue","phoneInputValue","newPerson","length","updatedPerson","map","per","returnedPerson","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f0b7e435.chunk.js","sourcesContent":["const Filter = ({filterRef, handleChange}) => {\r\n    return (\r\n      <div>\r\n          search string: <input ref={filterRef} onChange={handleChange} />\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Filter;","const PersonForm = ({nameRef, phoneRef, handleSubmit}) => {\r\n    return (\r\n      <div>\r\n        <form onSubmit={handleSubmit}>\r\n          <div>\r\n            name: <input ref={nameRef} /><br />\r\n            number: <input ref={phoneRef} />\r\n          </div>\r\n          <div>\r\n            <button type=\"submit\">add</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default PersonForm;","//import deletePerson from '../App'\r\n\r\n\r\n\r\nconst Person = ({person, deletePerson}) => {\r\n    return (\r\n        <li>\r\n            {person.name} {person.number}\r\n            <button onClick={() => deletePerson(person.id)}>Delete</button>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default Person;","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst create = (newObject) => {\r\n    const request = axios.post(baseUrl, newObject);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nexport default {getAll, update, create, remove}","import {useState, useRef, useEffect} from 'react'\n\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Person from './components/Person'\n\nimport personService from './services/persons'\n\nfunction App() {\n\n  const [persons, setPersons] = useState([]);\n  const [personsToShow, setPersonsToShow] = useState([]);\n  const filterInput = useRef(null);\n  const nameInput = useRef();\n  const phoneInput = useRef();\n\n  useEffect(() => {\n    personService.getAll().then(initialPersons => {\n      setPersons(initialPersons)\n      setPersonsToShow(initialPersons)\n    });\n  }, [])\n\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const nameInputValue = nameInput.current.value;\n    const phoneInputValue = phoneInput.current.value;\n    if (nameInputValue === '' || phoneInputValue === '') return;\n    //if (persons.filter(person => person.name === nameInputValue).length > 0) return;\n\n    const newPerson = {\n      id: persons.length + 1,\n      name: nameInputValue,\n      number: phoneInputValue,\n    }\n\n    const p = persons.filter(p => p.name.toLowerCase() === newPerson.name.toLowerCase());\n    if (p.length > 0) {\n      if (window.confirm('Dude already in list, update number?')) {\n        const person = {\n          id: p[0].id,\n          name: p[0].name,\n          number: phoneInputValue\n        }\n        personService.update(person.id, person).then(updatedPerson => {\n          setPersons(persons.map(per => per.id !== person.id ? per : updatedPerson)) \n          setPersonsToShow(persons.map(per => per.id !== person.id ? per : updatedPerson))\n        }\n\n        )\n      }\n    } else {\n        personService.create(newPerson).then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson));\n          setPersonsToShow(persons.concat(returnedPerson))\n        })\n    }\n\n    nameInput.current.value = null;\n    phoneInput.current.value = null;\n  }\n\n   const deletePerson = (id) => {\n     if (window.confirm('Delete?')) {\n      personService.remove(id);\n      setPersons(persons.filter(p => p.id !== id))\n      setPersonsToShow(persons.filter(p => p.id !== id))\n      filterInput.current.value = null;\n     }\n   }\n\n  const handleFilterChange = (event) => {\n    const value = event.target.value.toLowerCase();\n    const show = value === '' ? persons : persons.filter(person => person.name.toLowerCase().includes(value))\n    setPersonsToShow(show)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Filter filterRef={filterInput} handleChange={handleFilterChange} />\n      <h2>Add Persons</h2>\n      <PersonForm nameRef={nameInput} phoneRef={phoneInput} handleSubmit={addPerson} />\n      <h2>Numbers</h2>\n      {/*<Persons persons={personsToShow} />*/}\n      <ul>\n        <>\n        {personsToShow.map(person => \n            <Person key={person.id} person={person} deletePerson={deletePerson} />\n          )}          \n          </>\n      </ul>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}